pre-commit:
  parallel: false
  commands:
    # Go - fluid CLI
    fmt-fluid:
      glob: "*.go"
      root: "fluid"
      run: make fmt
      stage_fixed: true

    # Go - fluid-remote API
    fmt-fluid-remote:
      glob: "*.go"
      root: "fluid-remote"
      run: make fmt
      stage_fixed: true

    # Python SDK
    fmt-sdk-black:
      glob: "*.py"
      root: "sdk/fluid-py"
      run: black .
      stage_fixed: true

    fmt-sdk-isort:
      glob: "*.py"
      root: "sdk/fluid-py"
      run: isort .
      stage_fixed: true

    # Web
    fmt-web:
      glob: "*.{ts,tsx,js,jsx,json,css,md}"
      root: "web"
      run: bun format
      stage_fixed: true

    # Landing Page
    fmt-landing-page:
      glob: "*.{ts,tsx,js,jsx,json,css,md,astro}"
      root: "landing-page"
      run: bun format
      stage_fixed: true

pre-push:
  parallel: true
  commands:
    # Go - fluid CLI
    vet-fluid:
      glob: "*.go"
      root: "fluid"
      run: make vet

    test-fluid:
      glob: "*.go"
      root: "fluid"
      run: make test

    lint-fluid:
      glob: "*.go"
      root: "fluid"
      run: make lint

    # Go - fluid-remote API
    vet-fluid-remote:
      glob: "*.go"
      root: "fluid-remote"
      run: make vet

    test-fluid-remote:
      glob: "*.go"
      root: "fluid-remote"
      run: make test

    lint-fluid-remote:
      glob: "*.go"
      root: "fluid-remote"
      run: make lint

    # Python SDK
    test-sdk:
      glob: "*.py"
      root: "sdk/fluid-sdk-py"
      run: python3 -m pytest test/ -v --tb=short

    # Web
    lint-web:
      glob: "*.ts"
      root: "web"
      run: bun lint

    typecheck-web:
      glob: "*.ts"
      root: "web"
      run: bun typecheck

    # Landing Page
    lint-landing-page:
      glob: "*.{ts,tsx,js,jsx,css,astro}"
      root: "landing-page"
      run: bun lint

    typecheck-landing-page:
      glob: "*.{ts,tsx,js,jsx,css,astro}"
      root: "landing-page"
      run: bun typecheck

    check-landing-page:
      glob: "*.{ts,tsx,js,jsx,css,astro}"
      root: "landing-page"
      run: bun check
